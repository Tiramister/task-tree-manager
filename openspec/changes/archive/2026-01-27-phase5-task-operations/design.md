## Context

タスクツリーマネージャーは Phase 4 までで表示と編集機能を実装済み。Phase 5 では CRUD 操作の残り（Create / Delete）と、ステータス変更のショートカットを追加する。

既存の taskStore には `addTask`, `deleteTask`, `updateTask` が実装済みで、UI からこれらを呼び出す機能を追加する。

## Goals / Non-Goals

**Goals:**

- ルートタスクを作成できるボタンをツリービューに追加
- 任意のタスクの子タスクを作成できる機能を追加
- タスクを削除できる機能を追加（確認ダイアログ付き）
- ツリービューからステータスを素早く変更できる機能を追加

**Non-Goals:**

- ドラッグ＆ドロップによるタスクの並び替え・移動（Phase 5 の範囲外）
- タスクの複製機能
- 複数タスクの一括操作

## Decisions

### 1. 新規タスク作成のUI

**決定**: ダイアログ形式でタイトルのみ入力

- ルートタスク: ツリービュー上部に「+新規タスク」ボタン
- 子タスク: 各タスクアイテムのコンテキストメニュー（右クリックまたは三点リーダー）から追加
- 作成時はタイトルのみ必須、詳細は作成後にドロワーで編集
- shadcn/ui の `Dialog` を使用

**理由**: シンプルで素早い操作を優先。詳細入力は既存のドロワーで十分。

### 2. タスク削除のUI

**決定**: 確認ダイアログ付きの削除

- 削除ボタンの配置: タスク詳細ドロワー内の下部に配置
- 子タスクがある場合は警告メッセージを表示
- shadcn/ui の `AlertDialog` を使用

**理由**: 誤削除防止のため確認が必要。ドロワー内に配置することで誤操作を減らす。

### 3. ステータス変更のUI

**決定**: ステータスバッジをクリックでドロップダウンメニューを表示

- ツリービューのステータスバッジをクリックすると、ステータス選択メニューが開く
- タスク行全体のクリックは引き続きドロワーを開く
- shadcn/ui の `DropdownMenu` を使用

**理由**: タスク行クリックの既存動作を維持しつつ、ステータス変更のショートカットを提供。

## Risks / Trade-offs

- **[リスク] コンテキストメニューの発見性**: ユーザーが子タスク追加機能に気づかない可能性
  → 三点リーダーアイコンを常に表示することで緩和

- **[リスク] ステータスバッジの操作性**: タッチデバイスでの操作が難しい可能性
  → バッジを十分な大きさに保ち、ドロワーでの変更も可能なままにする

- **[トレードオフ] 削除ボタンの配置**: ドロワー内に配置することで、削除に2ステップ必要
  → 誤削除防止を優先した設計判断
