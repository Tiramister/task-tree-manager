## Context

タスク詳細ドロワー (`TaskDetailDrawer.tsx`) は現在、選択したタスク自身のフィールド（タイトル、ステータス、説明、期限、作業記録）を編集可能な形式で表示している。子タスクの情報は表示されておらず、確認するにはドロワーを閉じてツリーから個別に開く必要がある。

タスクツリー一覧 (`TaskTreeView.tsx`) では、`collapsedIds` (Set) による折り畳み管理と一括折り畳み/展開のパターンが確立されている。

## Goals / Non-Goals

**Goals:**
- タスク詳細ドロワー内に子孫タスク（子・孫・それ以下すべて）のタイトルと作業記録を閲覧専用で再帰的にツリー表示する
- 一覧画面と同様の折り畳み UI（個別・一括）を提供する

**Non-Goals:**
- 子孫タスクの編集機能（ステータス変更、タイトル編集など）は提供しない
- 子孫タスクからの詳細ドロワー遷移は行わない

## Decisions

### 1. 子タスクセクションの配置

ドロワーの既存フィールド（作業記録）の下に「子タスク」セクションを追加する。子タスクが存在しない場合はセクション自体を非表示にする。

**理由**: 親タスク自身の情報が優先されるため、子タスク情報は補助的な位置に置く。

### 2. 折り畳みの実装

子孫タスクを再帰的なツリー構造で表示する。各タスクはタイトルをクリックすると作業記録が展開されるアコーディオン形式とする。子タスクを持つノードはさらにその子をインデントして表示する。一括折り畳み/展開ボタンをセクションヘッダーに配置する。

折り畳み状態はコンポーネントのローカル state で管理する（永続化しない）。

**理由**: ドロワーを開くたびにリセットされるのが自然な挙動であり、一覧画面の `collapsedIds` パターンと同様のアプローチを取る。

### 3. コンポーネント構成

新規コンポーネント `DescendantTaskTree` を作成し、`TaskDetailDrawer` から呼び出す。内部で再帰的にノードを描画する `DescendantTaskNode` コンポーネントを使用する。

**理由**: ドロワーコンポーネントの肥大化を防ぎ、子孫タスク表示のロジックを分離する。再帰構造により任意の深さに対応できる。

### 4. 子タスクデータの取得

`useTaskStore` の `tasks` 配列から `childrenMap`（parentId → Task[]）を `useMemo` で構築する。既存の `TaskTreeView` と同じパターンを踏襲し、再帰的にツリーを描画する。

**理由**: 新しいストアメソッドを追加する必要がなく、既存パターンとの一貫性を保てる。

## Risks / Trade-offs

- 子孫タスクが多数・深い階層にある場合、ドロワーのスクロール量が増える → 折り畳みにより緩和される。初期状態は全て折り畳みとする。
