### Requirement: ドロワーでタスク詳細を表示

タスクを選択したとき、システムはドロワー（Sheet）形式で右側からタスク詳細画面を表示しなければならない（SHALL）。ドロワーを開いたとき、タイトル入力欄に自動フォーカスしてはならない（SHALL NOT）。

#### Scenario: タスククリックでドロワーを開く
- **WHEN** ユーザーがタスクツリー内のタスクをクリックする
- **THEN** 画面右側からドロワーがスライドインして表示される

#### Scenario: ドロワーを閉じる
- **WHEN** ユーザーがドロワーの外側をクリックする、または閉じるボタンをクリックする
- **THEN** ドロワーが閉じる

#### Scenario: ドロワーを開いたときにタイトルにフォーカスしない
- **WHEN** タスク詳細ドロワーが開かれる
- **THEN** タイトル入力欄にフォーカスが当たっていない

### Requirement: タスクの全フィールドを表示

ドロワー内では、タスクの全フィールドを表示しなければならない（SHALL）。完了日はステータスが "completed" のとき、編集可能なdate入力として表示しなければならない（SHALL）。

#### Scenario: 必須フィールドの表示
- **WHEN** タスク詳細ドロワーが開かれる
- **THEN** タスクのタイトル、ステータス、作成日が表示される

#### Scenario: オプショナルフィールドの表示
- **WHEN** タスクに詳細説明、期限、完了日、作業記録が設定されている
- **THEN** それらのフィールドが表示される

#### Scenario: 未設定フィールドの表示
- **WHEN** タスクのオプショナルフィールドが未設定
- **THEN** そのフィールドは空欄または「未設定」として表示される

#### Scenario: 完了タスクの完了日が編集可能なdate入力で表示される
- **WHEN** ステータスが "completed" のタスクの詳細ドロワーを開く
- **THEN** 完了日がdate入力フィールドとして表示され、現在の完了日が初期値として設定されている

### Requirement: タスクのタイトルを編集

ユーザーはドロワー内でタスクのタイトルを編集できなければならない（SHALL）。

#### Scenario: タイトルの編集
- **WHEN** ユーザーがタイトル入力欄を編集してフォーカスを外す
- **THEN** 変更がタスクストアに保存される

#### Scenario: タイトルを空にできない
- **WHEN** ユーザーがタイトルを空にしようとする
- **THEN** 空のタイトルは保存されず、元の値が維持される

### Requirement: タスクのステータスを編集

ユーザーはドロワー内でタスクのステータスを編集できなければならない（SHALL）。

#### Scenario: ステータスの変更
- **WHEN** ユーザーがステータスのドロップダウンで別のステータスを選択する
- **THEN** 変更がタスクストアに保存される

#### Scenario: 完了ステータスへの変更
- **WHEN** ユーザーがステータスを「完了」に変更する
- **THEN** completedAt に現在日時が自動的に設定される

#### Scenario: 完了から他ステータスへの変更
- **WHEN** ユーザーが「完了」から他のステータスに変更する
- **THEN** completedAt がクリアされる

### Requirement: タスクの詳細説明を編集

ユーザーはドロワー内でタスクの詳細説明を編集できなければならない（SHALL）。

#### Scenario: 詳細説明の編集
- **WHEN** ユーザーが詳細説明のテキストエリアを編集してフォーカスを外す
- **THEN** 変更がタスクストアに保存される

### Requirement: タスクの期限を編集

ユーザーはドロワー内でタスクの期限を編集できなければならない（SHALL）。

#### Scenario: 期限の設定
- **WHEN** ユーザーが期限の日付ピッカーで日付を選択する
- **THEN** 選択した日付が dueDate として保存される

#### Scenario: 期限のクリア
- **WHEN** ユーザーが期限の日付をクリアする
- **THEN** dueDate が undefined になる

### Requirement: タスクの作業記録を編集

ユーザーはドロワー内でタスクの作業記録を編集できなければならない（SHALL）。

#### Scenario: 作業記録の編集
- **WHEN** ユーザーが作業記録のテキストエリアを編集してフォーカスを外す
- **THEN** 変更がタスクストアに保存される

### Requirement: タスクの完了日を編集

ユーザーはドロワー内で完了済みタスクの完了日を編集できなければならない（SHALL）。完了日の編集UIは期限フィールドと同じdate入力パターンを使用しなければならない（SHALL）。

#### Scenario: 完了日の変更
- **WHEN** ユーザーが完了日のdate入力で別の日付を選択する
- **THEN** 選択した日付がcompletedAtとして保存される

#### Scenario: 未完了タスクには完了日の編集UIを表示しない
- **WHEN** ステータスが "completed" 以外のタスクの詳細ドロワーを開く
- **THEN** 完了日の編集UIは表示されない
